{"version":3,"file":"my-single-spa.js","sources":["../../src/applications/apps.helper.js","../../src/start.js","../../src/lifecycles/helper.js","../../src/applications/timeouts.js","../../src/lifecycles/load.js","../../src/lifecycles/bootstrap.js","../../src/lifecycles/unmount.js","../../src/lifecycles/mount.js","../../src/navigation/hijackLocations.js","../../src/navigation/invoke.js","../../src/applications/apps.js"],"sourcesContent":["// 未加载\nexport const NOT_LOADED = 'NOT_LOADED';\n// 加载app代码中\nexport const LOAD_RESOURCE_CODE = 'LOAD_RESOURCE_CODE';\n// 加载成功，但未启动\nexport const NOT_BOOTSTRAPPED = 'NOT_BOOTSTRAPPED';\n// 启动中\nexport const BOOTSTRAPPING = 'BOOTSTRAPPING';\n// 启动成功，未挂载\nexport const NOT_MOUNTED = 'NOT_MOUNTED';\n// 挂载中\nexport const MOUNTING = 'MOUNTING';\n// 挂载成功\nexport const MOUNTED = 'MOUNTED';\n// 卸载中\nexport const UNMOUNTING = 'UNMOUNTING';\n// 加载时参数校验未通过，或非致命错误\nexport const SKIP_BECAUSE_BROKEN = 'SKIP_BECAUSE_BROKEN';\n// 加载时遇到致命错误\nexport const LOAD_ERROR = 'LOAD_ERROR';\n// 更新service中\nexport const UPDATING = 'UPDATING';\n\nexport function notSkip(app){\n    return app.status !== SKIP_BECAUSE_BROKEN\n}\nexport function notLoadError(app){\n    return app.status !== LOAD_ERROR\n}\nexport function isntLoaded(app){\n    return app.status === NOT_LOADED\n}\nexport function shouldBeActivity(app){\n    try {\n        return app.activityWhen(window.location)\n    } catch (e) {\n        app.status = SKIP_BECAUSE_BROKEN\n        console.log(e);\n    }\n\n}\n\n\nexport function isLoaded(app) {\n    return app.status !== NOT_LOADED && app.status !== LOAD_ERROR && app.status !== LOAD_RESOURCE_CODE;\n}\n\n\nexport function isActive(app) {\n    return app.status === MOUNTED;\n}\n\nexport function isntActive(app) {\n    return !isActive(app)\n}\n\nexport function shouldntBeActivity(app) {\n    try {\n        return !app.activityWhen(window.location);\n    } catch (e) {\n        app.status = SKIP_BECAUSE_BROKEN;\n        throw e;\n    }\n}\n","import {invoke} from \"./navigation/invoke\";\n\nlet started = false;\n\nexport function start() {\n    if(started){\n        return Promise.resolve()\n    }\n    started = true;\n    return invoke();\n}\n\nexport function isStarted() {\n    return started;\n}\n","export function smellLikeAPromise(promise) {\n    if(promise instanceof Promise){\n        return true\n    }\n    return typeof promise === 'object' && typeof promise.then === 'function' && typeof promise.catch === 'function';\n}\n\nexport function flattenLifecycleArray(lifecycle, description) {\n    if(!Array.isArray(lifecycle)){\n        lifecycle = [lifecycle]\n    }\n    if(!lifecycle.length){\n        lifecycle = [() => Promise.resolve()];\n    }\n\n    return props => new Promise(((resolve, reject) => {\n        waitForPromises(0);\n        function waitForPromises(index){\n            let fn = lifecycle[index]();\n            if(!smellLikeAPromise(fn)){\n                reject(new Error(`${description}`))\n            }else {\n                fn.then(() => {\n                    if(index >= lifecycle.length -1){\n                        resolve()\n                    }else {\n                        waitForPromises(++index)\n                    }\n                }).catch(reject)\n            }\n        }\n    }))\n}\n\nexport function getProps(app) {\n    return {\n        name: app.name,\n        ...app.customProps\n    }\n}\n","const TIMEOUTS = {\n    bootstrap: {\n        milliseconds: 3000,\n        rejectWhenTimeout: false\n    },\n    mount: {\n        milliseconds: 3000,\n        rejectWhenTimeout: false\n    },\n    unmount: {\n        milliseconds: 3000,\n        rejectWhenTimeout: false\n    }\n};\n\nexport function reasonableTime(lifecyclePromise, description, timeout) {\n    return new Promise((resolve, reject) => {\n        let finished = false;\n        lifecyclePromise.then(data => {\n            finished = true;\n            resolve(data)\n        }).catch(e => {\n            finished = true;\n            reject(e)\n        });\n\n        setTimeout(() => {\n            if(finished){\n                return;\n            }\n            if(timeout.rejectWhenTimeout){\n                reject(`${description}`)\n            } else {\n                console.log('timeout but waiting');\n            }\n        }, timeout.microseconds)\n    })\n}\n\nexport function ensureTimeout(timeouts = {}) {\n    return {\n        ...TIMEOUTS,\n        ...timeouts\n    }\n}\n","import {\n    NOT_LOADED,\n    LOAD_RESOURCE_CODE,\n    SKIP_BECAUSE_BROKEN, NOT_BOOTSTRAPPED, LOAD_ERROR,\n} from \"../applications/apps.helper\";\nimport {\n    smellLikeAPromise,\n    flattenLifecycleArray,\n    getProps\n} from \"./helper\";\nimport {ensureTimeout} from \"../applications/timeouts\";\n\n// 加载\nexport function toLoadPromise(app) {\n    if(app.status !== NOT_LOADED){\n        return Promise.resolve(app);\n    }\n    // 状态设置为加载代码中\n    app.status = LOAD_RESOURCE_CODE;\n\n    let loadPromise = app.loadFunction(getProps(app));\n\n    if(!smellLikeAPromise(loadPromise)){\n        app.status = SKIP_BECAUSE_BROKEN;\n        return Promise.reject(new Error('loadPromise must return a promise or thenable object'));\n    }\n\n    return loadPromise.then(appConfig => {\n        if(typeof appConfig !== 'object'){\n            throw new Error('')\n        }\n        let errors = [];\n        // 生命周期 bootstrap mount unmount\n        ['bootstrap', 'mount', 'unmount'].forEach(lifecycle => {\n            if(!appConfig[lifecycle]){\n                errors.push('lifecycle:' + lifecycle + 'must be exists')\n            }\n        });\n\n        if(errors.length){\n            app.status = SKIP_BECAUSE_BROKEN;\n            return app\n        }\n\n        app.status = NOT_BOOTSTRAPPED;\n        app.bootstrap = flattenLifecycleArray(appConfig.bootstrap, `app: ${app.name} bootstrapping`);\n        app.mount = flattenLifecycleArray(appConfig.mount, `app: ${app.name} mounting`);\n        app.unmount = flattenLifecycleArray(appConfig.unmount, `app: ${app.name} unmounting`);\n\n        app.timeouts = ensureTimeout(appConfig.timeouts);\n        console.log(app);\n        return app\n    }).catch(e => {\n        app.status = LOAD_ERROR;\n        console.log(e);\n    })\n}\n\n\n","import {BOOTSTRAPPING, NOT_BOOTSTRAPPED, NOT_MOUNTED, SKIP_BECAUSE_BROKEN} from \"../applications/apps.helper\";\nimport {reasonableTime} from \"../applications/timeouts\";\nimport {getProps} from \"./helper\";\n\nexport function toBootstrapPromise(app) {\n    if(app.status !== NOT_BOOTSTRAPPED){\n        return Promise.resolve(app)\n    }\n    app.status = BOOTSTRAPPING;\n    console.log(app);\n    return reasonableTime(app.bootstrap(getProps(app)), `app: ${app.name} bootstripting`, app.timeouts.bootstrap).then(() => {\n        app.status = NOT_MOUNTED;\n        return app\n    }).catch(e => {\n        console.log(e);\n        app.status = SKIP_BECAUSE_BROKEN;\n        return app\n    })\n}\n","import {MOUNTED, NOT_MOUNTED, SKIP_BECAUSE_BROKEN, UNMOUNTING} from \"../applications/apps.helper\";\nimport {reasonableTime} from \"../applications/timeouts\";\nimport {getProps} from \"./helper\";\n\nexport function toUnmountPromise(app) {\n    if(app.status !== MOUNTED){\n        return Promise.resolve(app);\n    }\n    app.status = UNMOUNTING;\n\n    return reasonableTime(app.unmount(getProps(app)), `app: ${app.name} unmounting`, app.timeouts.unmount).then(() => {\n        app.status = NOT_MOUNTED;\n        return app\n    }).catch(e => {\n        app.status = SKIP_BECAUSE_BROKEN;\n        console.log(e);\n        return app;\n    })\n}\n","import {MOUNTED, MOUNTING, NOT_MOUNTED, SKIP_BECAUSE_BROKEN} from \"../applications/apps.helper\";\nimport {reasonableTime} from \"../applications/timeouts\";\nimport {getProps} from \"./helper\";\nimport {toUnmountPromise} from \"./unmount\";\n\nexport function toMountPromise(app) {\n    if(app.status !== NOT_MOUNTED){\n        return Promise.resolve(app);\n    }\n    app.status = MOUNTING;\n\n    return reasonableTime(app.mount(getProps(app)), `app: ${app.name} mounting`, app.timeouts.mount).then(() => {\n        app.status = MOUNTED;\n        return app\n    }).catch(e => {\n        // 如果app挂载失败， 那么立即执行unmount操作\n        app.status = MOUNTED;\n        console.log(e);\n        return toUnmountPromise(app);\n    })\n}\n","import {invoke} from \"./invoke\";\n\nconst HIJACK_EVENTS_NAME = /^(hashchange|popstate)$/i;\nconst EVENTS_POOL = {\n    hashchange: [],\n    popstate: []\n};\nfunction reroute() {\n    invoke([], arguments)\n}\n\nwindow.addEventListener('hashchange', reroute);\nwindow.addEventListener('popstate', reroute);\n\n// 拦截所有注册的事件，以便确保这里的事件总是第一个执行\nconst originalAddEventListener = window.addEventListener;\nconst originalRemoveEventListener = window.removeEventListener;\n\nwindow.addEventListener = function (eventName, handler, args) {\n    if (eventName && HIJACK_EVENTS_NAME.test(eventName) && typeof handler === 'function') {\n        EVENTS_POOL[eventName].indexOf(handler) === -1 && EVENTS_POOL[eventName].push(handler);\n    }\n    return originalAddEventListener.apply(this, arguments);\n};\n\nwindow.removeEventListener = function (eventName, handler) {\n    if (eventName && HIJACK_EVENTS_NAME.test(eventName) && typeof handler === 'function') {\n        let eventList = EVENTS_POOL[eventName];\n        eventList.indexOf(handler) > -1 && (EVENTS_POOL[eventName] = eventList.filter(fn => fn !== handler));\n    }\n    return originalRemoveEventListener.apply(this, arguments);\n};\n\n// 拦截history的方法，因为pushState和replaceState方法并不会触发onpopstate事件，所以我们即便在onpopstate时执行了reroute方法，也要在这里执行下reroute方法。\nconst originalHistoryPushState = window.history.pushState;\nconst originalHistoryReplaceState = window.history.replaceState;\nwindow.history.pushState = function (state, title, url) {\n    let result = originalHistoryPushState.apply(this, arguments);\n    reroute(mockPopStateEvent(state));\n    return result;\n};\nwindow.history.replaceState = function (state, title, url) {\n    let result = originalHistoryReplaceState.apply(this, arguments);\n    reroute(mockPopStateEvent(state));\n    return result;\n};\n\nfunction mockPopStateEvent(state) {\n    return new PopStateEvent('popstate', {state});\n}\n\nexport function callCapturedEvents(eventArgs) {\n    if (!eventArgs) {\n        return;\n    }\n    if (!Array.isArray(eventArgs)) {\n        eventArgs = [eventArgs];\n    }\n    let name = eventArgs[0].type;\n    if (!EVENTS_POOL[name] || EVENTS_POOL[name].length === 0) {\n        return;\n    }\n    EVENTS_POOL[name].forEach(handler => handler.apply(window, eventArgs));\n}\n","import {isStarted} from \"../start\";\nimport {getAppsToLoad, getAppsToUnmount, getAppsToMount, getMountedApps} from \"../applications/apps\";\nimport {toLoadPromise} from \"../lifecycles/load\"\nimport {toBootstrapPromise} from \"../lifecycles/bootstrap\";\nimport {toUnmountPromise} from \"../lifecycles/unmount\";\nimport {toMountPromise} from \"../lifecycles/mount\";\nimport {callCapturedEvents} from \"./hijackLocations\";\n\nlet appChangesUnderway = false; //\nlet changesQueue = [];\n\nexport function invoke(pendings = [], eventArgs) {\n    if(appChangesUnderway){\n        return new Promise(((resolve, reject) => {\n            changesQueue.push({\n                success: resolve,\n                failure: reject,\n                eventArgs\n            })\n        }))\n    }\n    appChangesUnderway = true;\n    // 判断系统是否启动\n    if(isStarted()){\n        return performAppChanges()\n    } else {\n        // 按需预加载\n        return loadApps();\n    }\n\n    function loadApps() {\n        // 获取满足加载条件的app并加载\n        let loadPromises = getAppsToLoad().map(toLoadPromise);\n        return Promise.all(loadPromises).then(() => {\n            callAllCapturedEvents();\n            return finish();\n        }).catch(e => {\n            callAllCapturedEvents();\n            console.log(e);\n        })\n    }\n\n    // 已经启动，先卸载再加载\n    function performAppChanges() {\n        // unmount不需要的app\n        let unmountPromise = getAppsToUnmount().map(toUnmountPromise);\n        unmountPromise = Promise.all(unmountPromise);\n        // load app\n        let loadApps = getAppsToLoad();\n        loadApps.map(app => {\n            return toLoadPromise(app).then(app => {\n                return toBootstrapPromise(app).then(() => unmountPromise).then(() => toMountPromise(app))\n            })\n        });\n\n        // mount app\n        let mountApps = getAppsToMount(); // NOT_MOUNTED\n        // 去重\n        mountApps.filter(app => loadApps.indexOf(app) === -1);\n\n        mountApps = mountApps.map(app => {\n            return toBootstrapPromise(app).then(() => unmountPromise).then(() => toMountPromise(app))\n        });\n\n        return unmountPromise.then(() => {\n            let allPromises = loadApps.concat(mountApps);\n            return Promise.all(allPromises).then(() => {\n                    callAllCapturedEvents();\n                    return finish();\n                }, e => {\n                    pendings.forEach(item => item.failure(e));\n                    throw e;\n                })\n            }, e => {\n                callAllCapturedEvents();\n                console.log(e);\n            })\n    }\n\n    function finish() {\n        let returnValue = getMountedApps();\n        if(pendings.length){\n            // 当前被挂载的app\n            pendings.forEach(item => item.success(returnValue));\n        }\n        appChangesUnderway = false;\n        if(changesQueue.length){\n            let backup = changesQueue;\n            changesQueue = [];\n            invoke(backup)\n        }\n        return returnValue\n    }\n\n    function callAllCapturedEvents() {\n        // eventsQueue.length>0 说明路由发生了变化\n        let eventsQueue = pendings && pendings.length && pendings.filter(item => {\n            return !!item.eventArgs\n        }).forEach(event => {\n            callCapturedEvents(event)\n        });\n        eventArgs && callCapturedEvents()\n    }\n}\n","import {\n    NOT_LOADED,\n    notSkip,\n    notLoadError,\n    isntLoaded,\n    shouldBeActivity,\n    isActive,\n    shouldntBeActivity,\n    isLoaded,\n    isntActive\n\n} from './apps.helper'\nimport {invoke} from \"../navigation/invoke\";\n\nconst APPS = [];\n\n/**\n * 注册application\n * @param {string} appName 要注册的app名称\n * @param {Object|Function<Promise>} loadFunction app内容或app异步加载函数\n * @param {Function<Boolean>} activityWhen 判断该app应该何时被启动\n * @param {Object} customProps 自定义配置\n * @return {Promise}\n */\nexport function registerApplication(appName, loadFunction, activityWhen, customProps = {}) {\n    if(!appName || typeof appName !== 'string'){\n        throw new Error('appName must be a non-empty string')\n    }\n    if(!loadFunction){\n        throw new Error('loadFunction must be a function or object')\n    }\n    if(typeof loadFunction !== 'function'){\n        loadFunction = () => Promise.resolve(loadFunction)\n    }\n    if(typeof activityWhen !== 'function'){\n        throw new Error('activityWhen must be a function')\n    }\n\n    APPS.push({\n        name: appName,\n        loadFunction,\n        activityWhen,\n        customProps,\n        status: NOT_LOADED\n    });\n    invoke()\n}\n\n/**\n * 获取满足加载条件的app\n * 1、没有加载中断\n * 2、没有加载错误\n * 3、没有被加载过\n * 4、满足app.activityWhen()\n * @return {*[]}\n */\nexport function getAppsToLoad() {\n    return  APPS.filter(notSkip).filter(notLoadError).filter(isntLoaded).filter(shouldBeActivity)\n}\n\n/**\n * 需要被unmount的app\n * 1、没有加载中断\n * 2、正在挂载的\n * 3、需要卸载的\n */\nexport function getAppsToUnmount() {\n    return APPS.filter(notSkip).filter(isActive).filter(shouldntBeActivity);\n}\n\n/**\n * 需要mount的app\n * 1、没有加载中断\n * 2、加载过的\n * 3、当前没有mounted的\n * 4、需要被mounted的\n */\nexport function getAppsToMount() {\n    return APPS.filter(notSkip).filter(isLoaded).filter(isntActive).filter(shouldBeActivity);\n}\n\nexport function getMountedApps() {\n    return APPS.filter(isActive).map(item => item.name);\n}\n"],"names":["NOT_LOADED","LOAD_RESOURCE_CODE","NOT_BOOTSTRAPPED","BOOTSTRAPPING","NOT_MOUNTED","MOUNTING","MOUNTED","UNMOUNTING","SKIP_BECAUSE_BROKEN","LOAD_ERROR","notSkip","app","status","notLoadError","isntLoaded","shouldBeActivity","activityWhen","window","location","e","console","log","isLoaded","isActive","isntActive","shouldntBeActivity","started","start","Promise","resolve","invoke","isStarted","smellLikeAPromise","promise","then","catch","flattenLifecycleArray","lifecycle","description","Array","isArray","length","props","reject","waitForPromises","index","fn","Error","getProps","name","customProps","TIMEOUTS","bootstrap","milliseconds","rejectWhenTimeout","mount","unmount","reasonableTime","lifecyclePromise","timeout","finished","data","setTimeout","microseconds","ensureTimeout","timeouts","toLoadPromise","loadPromise","loadFunction","appConfig","errors","forEach","push","toBootstrapPromise","toUnmountPromise","toMountPromise","HIJACK_EVENTS_NAME","EVENTS_POOL","hashchange","popstate","reroute","arguments","addEventListener","originalAddEventListener","originalRemoveEventListener","removeEventListener","eventName","handler","args","test","indexOf","apply","eventList","filter","originalHistoryPushState","history","pushState","originalHistoryReplaceState","replaceState","state","title","url","result","mockPopStateEvent","PopStateEvent","callCapturedEvents","eventArgs","type","appChangesUnderway","changesQueue","pendings","success","failure","performAppChanges","loadApps","loadPromises","getAppsToLoad","map","all","callAllCapturedEvents","finish","unmountPromise","getAppsToUnmount","mountApps","getAppsToMount","allPromises","concat","item","returnValue","getMountedApps","backup","eventsQueue","event","APPS","registerApplication","appName"],"mappings":"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"}